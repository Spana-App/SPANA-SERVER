# ============================================
# SPANA Backend Environment Configuration
# ============================================
# Copy this file to .env and update with your actual values
# DO NOT commit .env to git (it's in .gitignore)

# ============================================
# Database Configuration
# ============================================
# IMPORTANT: Local .env MUST use the SAME database as production backend (Render).
# If they differ, bookings created via the app won't appear when you run scripts locally.
# Copy DATABASE_URL from: Render Dashboard → spana-backend → Environment
# Verify sync: npx ts-node scripts/verifyDatabaseSync.ts
#
# Option 1: Supabase (Recommended - No sleeping, reliable)
# Get your connection string from: https://app.supabase.com/project/[your-project]/settings/database
# DATABASE_URL="postgresql://postgres:[YOUR-PASSWORD]@[PROJECT-REF].supabase.co:5432/postgres?sslmode=require"

# Option 2: Render PostgreSQL (Free tier sleeps after inactivity)
# For LOCAL development, use External URL with SSL - MUST match Render's DATABASE_URL
DATABASE_URL="postgresql://spana_users:[YOUR-PASSWORD]@dpg-d3p2ooc9c44c738ksb8g-a.frankfurt-postgres.render.com/spana_db?sslmode=require"

# Option 3: Local PostgreSQL (only if production also uses local DB)
# DATABASE_URL="postgresql://postgres:password@localhost:5432/spana_db"

# Individual PostgreSQL settings (optional, used by connection pool)
# Only needed if not using DATABASE_URL
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432
# POSTGRES_USER=postgres
# POSTGRES_PASSWORD=password
# POSTGRES_DB=spana_db
# POSTGRES_SSL=false

# ============================================
# JWT Configuration
# ============================================
# Generate a secure random string for production!
# You can use: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your_super_secret_jwt_key_change_this_in_production
JWT_EXPIRES_IN=7d

# ============================================
# Server Configuration
# ============================================
PORT=5003
NODE_ENV=development
CLIENT_URL=http://localhost:3000

# Website services display: true = show all (seeded + admin-created); false = only admin-created from CMS
# Set to false to hide seeded default services - website will only show services created by admins
# SHOW_SYSTEM_SERVICES_ON_WEBSITE=false

# ============================================
# Email Configuration (Required for Email)
# ============================================

# Option 1: Email Microservice (Recommended for Production)
# Use Vercel email microservice - avoids SMTP port blocking on Render
USE_EMAIL_SERVICE=true
EMAIL_SERVICE_URL=https://your-email-service.vercel.app
EMAIL_SERVICE_SECRET=your-api-secret-here

# Option 2: SendGrid (Alternative)
# Get API key from: https://app.sendgrid.com/settings/api_keys
# MAIL_PROVIDER=sendgrid
# SENDGRID_API_KEY=SG.your_sendgrid_api_key_here
# SENDGRID_SMTP_HOST=smtp.sendgrid.net
# SENDGRID_SMTP_PORT=587
# SENDGRID_SMTP_USER=apikey
# SMTP_FROM=noreply@spana.co.za
# MAIL_ENABLED=true

# Option 2: Custom SMTP (Alternative - may not work on Render free tier)
# SMTP_HOST=mail.spana.co.za
# SMTP_PORT=587
# SMTP_USER=no-reply@spana.co.za
# SMTP_PASS=your_password_here
# SMTP_FROM=no-reply@spana.co.za
# SMTP_SECURE=false
# SMTP_POOL=true
# SMTP_MAX_CONNECTIONS=5
# SMTP_MAX_MESSAGES=100
# SMTP_CONNECTION_TIMEOUT=30000
# SMTP_SOCKET_TIMEOUT=30000
# SMTP_GREETING_TIMEOUT=5000
# SMTP_TLS_CIPHERS=TLSv1.2
# SMTP_REJECT_UNAUTHORIZED=true
# MAIL_PROVIDER=smtp
# MAIL_ENABLED=true

# ============================================
# Redis Configuration (Optional)
# ============================================
# Set to true if you have Redis running
USE_REDIS=false
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ============================================
# MongoDB (Backup/Sync - Optional)
# ============================================
# Only needed if you're syncing data to MongoDB
MONGODB_URI=mongodb://localhost:27017/spana_backup

# ============================================
# External API (Optional)
# ============================================
EXTERNAL_API_URL=

# ============================================
# PayFast Payment Gateway Configuration (OPTIONAL)
# ============================================
# DISABLED BY DEFAULT - System works without PayFast
# To enable: Get credentials from https://www.payfast.co.za/
# For testing, use sandbox credentials
# PAYFAST_MERCHANT_ID=your_merchant_id_here
# PAYFAST_MERCHANT_KEY=your_merchant_key_here
# PAYFAST_PASSPHRASE=your_passphrase_here
# Use sandbox for testing: https://sandbox.payfast.co.za/eng/process
# Use production for live: https://www.payfast.co.za/eng/process
# PAYFAST_URL=https://sandbox.payfast.co.za/eng/process

# ============================================
# Stripe Payment Gateway (Sandbox / Test Mode)
# ============================================
# Optional - use for card payments in test mode
# Get keys from https://dashboard.stripe.com/test/apikeys
# Use test keys (sk_test_..., pk_test_...) for sandbox
# STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
# STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
# Webhook signing secret from Stripe CLI or Dashboard -> Developers -> Webhooks
# STRIPE_WEBHOOK_SECRET=whsec_your_webhook_signing_secret

# ============================================
# Google Maps API Configuration (OPTIONAL)
# ============================================
# DISABLED BY DEFAULT - System works without Google Maps
# To enable: Get API key from https://console.cloud.google.com/apis/credentials
# Enable these APIs:
# - Maps JavaScript API
# - Geocoding API
# - Directions API
# - Distance Matrix API
# GOOGLE_MAPS_API_KEY=your_google_maps_api_key_here

# ============================================
# App Version
# ============================================
APP_VERSION=1.0.0
