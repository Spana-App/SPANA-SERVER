# üö® Render Deployment Stuck - Fix Guide

## Problem
Deployment gets stuck at "Deploying..." because `DATABASE_URL` in `render.yaml` has a placeholder `[YOUR-PASSWORD]` instead of the actual password.

## Solution

### Option 1: Set DATABASE_URL in Render Dashboard (Recommended)

1. **Go to your Render Dashboard**
   - Navigate to your `spana-backend` service
   - Click on **Environment** tab

2. **Add DATABASE_URL environment variable**
   - Click **"Add Environment Variable"**
   - Key: `DATABASE_URL`
   - Value: `postgresql://spana_users:[YOUR-ACTUAL-PASSWORD]@dpg-d3p2ooc9c44c738ksb8g-a/spana_db`
   - Replace `[YOUR-ACTUAL-PASSWORD]` with your actual database password

3. **Remove DATABASE_URL from render.yaml** (already done - it's commented out)

4. **Redeploy**
   - The deployment should now work

### Option 2: Update render.yaml with Actual Password (Not Recommended)

‚ö†Ô∏è **Warning**: This exposes your password in git. Only do this if you're okay with that.

1. Edit `render.yaml`
2. Replace `[YOUR-PASSWORD]` with your actual database password
3. Commit and push
4. Render will redeploy automatically

## Required Environment Variables in Render Dashboard

Make sure these are set in your Render Dashboard:

- ‚úÖ `DATABASE_URL` - PostgreSQL connection string (REQUIRED)
- ‚úÖ `JWT_SECRET` - Auto-generated by Render (already configured)
- ‚úÖ `NODE_ENV` - Set to `production` (already configured)
- ‚úÖ `CLIENT_URL` - Your frontend URL (update if needed)
- ‚úÖ `POSTGRES_SSL` - Set to `false` (already configured)

### Optional but Recommended:
- `EMAIL_SERVICE_URL` - Your email microservice URL
- `EMAIL_SERVICE_SECRET` - API secret for email service
- `EXTERNAL_API_URL` - Your production API URL

## How to Get Your Database Password

1. Go to Render Dashboard
2. Navigate to your PostgreSQL database service
3. Go to **Info** tab
4. Copy the **Internal Database URL** or **External Database URL**
5. Extract the password from the connection string

## After Fixing

Once you set the correct `DATABASE_URL`:
1. Render will automatically redeploy
2. The deployment should complete successfully
3. Check logs to verify the server started correctly

## Verify Deployment

After deployment completes:
1. Check the **Logs** tab in Render Dashboard
2. Look for: `üöÄ Server is running on 0.0.0.0:[PORT]`
3. Test the health endpoint: `https://your-service.onrender.com/health`
